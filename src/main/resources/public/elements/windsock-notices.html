<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="windsock-data.html">

<script>
  System.import('windsock/elements/windsock-notices');
</script>


<dom-module id="windsock-notices-view" attributes="notices">
  <template>
    <template is="dom-if" if="{{isEmpty(notices)}}">
      <p>No notices</p>
    </template>
    <template is="dom-if" if="{{isNotEmpty(notices)}}">
      <ul>
        <template is="dom-repeat" items="{{notices}}">
          <li class="notice notice--{{item.data.notice.type}}">
            <span class$="{{classNoticeType(item.data.notice.type)}}">{{item.data.notice.type}}</span>
            <span class="notice__text">{{item.data.notice.text}}</span>
            <time class="notice__created" datetime="{{item.data.created}}">{{timeAgo(item.data.created)}}</time>
            <!-- TODO: flag if created == last-mod -->
            <time class="notice__updated" datetime="{{item.data.lastModified}}">{{timeAgo(item.data.lastModified)}}</time>
          </li>
        </template>
      </ul>
    </template>
  </template>
</dom-module>


<dom-module id="windsock-notices">
  <template>
    <windsock-data src="{{src}}" refresh="{{refresh}}" sink-notices="{{notices}}"></windsock-data>
    <windsock-notices-view notices="{{notices}}"></windsock-notices-view>
  </template>
</dom-module>
